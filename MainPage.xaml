<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Quiz_Point_Counter.MainPage"
             xmlns:viewmodel="clr-namespace:Quiz_Point_Counter.ViewModel"
             x:DataType="viewmodel:PlayerList"
             xmlns:model="clr-namespace:Quiz_Point_Counter.Model">

    <Grid RowDefinitions="Auto, 40, Auto, 10, *"
          ColumnDefinitions=".8*, .2*"
          Padding="8"
          RowSpacing="8"
          ColumnSpacing="8">

        <!-- Start new game -->
        <Button Text="Start game"
                FontFamily="Santelo"
                FontSize="30"
                Grid.ColumnSpan="2"
                Command="{Binding GoToCommand}"/>


        <Entry Placeholder="Enter player's name"
               FontFamily="Santelo"
               FontSize="20"
               Grid.Row="2"
               Text="{Binding Name}"/>

        <!-- Add new player -->
        <Button Text="Add"
                FontFamily="Santelo"
                FontSize="16"
                Padding="8"
                Grid.Row="2"
                Grid.Column="1"
                Command="{Binding AddPlayerCommand}"/>

        <!-- List of signed players -->
        <CollectionView Grid.Row="4"
                Grid.ColumnSpan="2"
                ItemsSource="{Binding Names}">

            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="model:Player">
                    <Grid>
                        <Border BackgroundColor="LightGray"
                                Padding="6"
                                StrokeThickness="4"
                                Margin="0, 0, 0, 7">
                            
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="8"/>
                            </Border.StrokeShape>

                            <Grid ColumnDefinitions="0.87*, 0.13*">
                                <Label Text="{Binding Name}"
                                       VerticalTextAlignment="Center"
                                       FontSize="22"/>

                                <Button Text="X"
                                        BackgroundColor="Red"
                                        Grid.Column="1"
                                        Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodel:PlayerList}}, 
                                                  Path=RemovePlayerCommand}"
                                        CommandParameter="{Binding .}"/>
                            </Grid>
                        </Border>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>

</ContentPage>
